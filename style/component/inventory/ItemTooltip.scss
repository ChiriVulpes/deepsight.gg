.item-tooltip {
	width: 400px;
		
	@each $tier in $tiers {
		&-tier-#{$tier} .tooltip-header {
			background: color(tier-#{$tier}-background, .85);
		}
	}
	
	&-source-watermark {
		position: absolute;
		top: 0;
		right: 0;
		border-right: 44px solid #0008;
		border-bottom: 44px solid transparent;
		&::before {
			content: "";
			display: block;
			position: absolute;
			width: 20px;
			height: 20px;
			left: 21px;
			top: 3px;
			background: currentColor;
			-webkit-mask-image: var(--icon);
			-webkit-mask-size: contain;
			-webkit-mask-position: center;
			-webkit-mask-repeat: no-repeat;
			mask-image: var(--icon);
			mask-size: contain;
			mask-position: center;
			mask-repeat: no-repeat;
		}
	}
	
	.tooltip-header {
		> * {
			z-index: 1;
		}
	}
	
	&-masterwork .tooltip-header {
		&::before {
			content: "";
			display: block;
			position: absolute;
			inset: 0;
			max-height: 69px;
			background: linear-gradient(-45deg, transparent 35%, #fff 50%, transparent 65%), #D4B73C;
			background-size: 400% 400%;
			animation: flash 2s linear infinite reverse;
			-webkit-mask-image: 
				url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 69"><polygon points="0,0 100,0 100,4 0,4" fill="black"/></svg>'),
				url("/image/masterworktooltip.png");
			mask-image: 
				url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 69"><polygon points="0,0 100,0 100,4 0,4" fill="black"/></svg>'),
				url("/image/masterworktooltip.png");
		}
	}
	
	&-content {
		background: none;
		padding: 0;
	}
	
	&-primary-info {
		display: grid;
		grid-template-columns: auto 1fr;
		font-size: 1.1em;
		line-height: 1em;
		padding: var(--tooltip-padding);
		background: color(tooltip-background);
	}
		
	&-primary-stat {
		font-size: 32pt;
		font-weight: 700;
		line-height: .7em;
		letter-spacing: -.02em;
		display: inline-flex;
		margin: 4px 0;
		
		&-damage {
			display: flex;
			&::before {
				content: "";
				display: inline-block;
				width: .75em;
				height: .75em;
				align-self: center;
				background: var(--icon);
				background-size: contain;
				margin-right: .15em;
			}
		}
		
		&::after {
			content: "";
			display: block;
			width: 2px;
			height: 90%;
			align-self: center;
			margin: 0 calc(32pt * .3);
			background: white;
			opacity: 0.3;
		}
	}
	
	&-energy-type-void {
		color: #b185df;
	}
	&-energy-type-solar {
		color: #f0631e;
	}
	&-energy-type-arc {
		color: #7aecf3;
	}
	&-energy-type-stasis {
		color: #4d88ff;
	}
	
	&-ammo-type {
		display: flex;
		text-transform: uppercase;
		align-items: center;
		
		&::before {
			content: "";
			display: inline-block;
			height: calc(32pt * .75);
			aspect-ratio: 1312 / 937;
			align-self: center;
			background: var(--icon);
			background-size: contain;
			background-repeat: no-repeat;
			margin-right: calc(32pt * .2);
		}
		
		&-primary {
			--icon: url("https://www.bungie.net/img/destiny_content/ammo_types/primary.png");
		}
		&-special {
			--icon: url("https://www.bungie.net/img/destiny_content/ammo_types/special.png");
		}
		&-heavy {
			--icon: url("https://www.bungie.net/img/destiny_content/ammo_types/heavy.png");
		}
	}
	
	&-energy {
		display: flex;
		text-transform: uppercase;
		align-items: center;
		
		&-value {
			display: flex;
			font-size: 1.6em;
			font-weight: 600;
			margin-right: .25em;
			transform: translateY(.03em);
			align-items: center;
			
			&::before {
				content: "";
				display: block;
				background: var(--icon);
				background-size: contain;
				background-repeat: no-repeat;
				width: .6em;
				height: .6em;
				margin-right: .05em;
				transform: translateY(-.03em);
			}
		}
	}
	
	&-deepsight {
		background: rgba(#5a2e18, .85);
		border: 2px solid #f0631e;
		border-left: none;
		border-right: none;
		padding: var(--tooltip-padding);
		
		&-pattern {
			display: flex;
			gap: .5em;
			align-items: center;
			padding: 0 2px 8px;
			&::before {
				content: "";
				display: block;
				width: 1em;
				height: 1em;
				background: currentColor;
				-webkit-mask-image: url("/image/svg/shaped.svg");
				-webkit-mask-size: contain;
				mask-image: url("/image/svg/shaped.svg");
				mask-size: contain;
			}
			
			&-number {
				font-weight: 700;
			}
			
			&-out-of {
				display: flex;
				gap: .5em;
				opacity: .5;
			}
		}
		
		&-progress-bar {
			color: color(foreground-0);
			background: color(background-1, .85);
			display: grid;
			grid-template-columns: 1fr auto;
			position: relative;
			padding: 2px 4px 2px 8px;
			z-index: 1;
			&::before {
				content: "";
				display: block;
				position: absolute;
				inset: 0;
				right: calc(100% * (1 - var(--progress)));
				background: #5da569;
				z-index: -1;
			}
		}
	}
}
