.item {
    width: 100%;
    height: 100%;
	position: relative;
	border: none;
	margin: 0;
	padding: 0;
	
	&::after {
		content: "";
		display: block;
		position: absolute;
		inset: 0;
		box-shadow: inset 0 0 0 1px var(--border-color);
		@include transition(out, background, box-shadow);
	}
	
	&:where(:hover, :active, :focus-visible) {
		&::after {
			background: color(button-background-hover-overlay);
			@include transition(in);
		}
	}
	
	&-icon {
		background: var(--icon);
		background-size: contain;
		width: 100%;
		height: 100%;
	}
	
	&-is-masterwork {
		--ornament-width: 3px;
	}
	
	&-universal-armour-ornament {
		@include transition(in, box-shadow);
		box-shadow: 
			inset 0 0 0 calc(3px + var(--ornament-width, 0px)) #0004, 
			inset 0 0 0 calc(4px + var(--ornament-width, 0px)) var(--border-color), 
			inset 0 0 0 calc(5px + var(--ornament-width, 0px)) #0008;
	}
		
	@each $tier in $tiers {
		&-tier-#{$tier} {
			--border-color: #{color(tier-#{$tier})};
			&:where(:hover, :active, :focus-visible) {
				--border-color: #{color(tier-#{$tier}-active)};
			}
		}
	}
	
	&-masterwork, &-shaped, &-deepsight, &-source-watermark, &-extra {
		position: absolute;
		inset: 0;
		background-size: cover;
		z-index: 1;
	}
	
	&-source-watermark {
		inset: 1px;
		background-image: var(--watermark);
	}
	
	&-masterwork {
		box-shadow: inset 0 0 0 2px #CBAF3C, inset 0 0 0 4px #CBAF3C88;
		overflow: hidden;
		
		&-spinny {
			position: absolute;
			inset: 0;
			
			-webkit-mask:
				url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 68"><polygon points="2,2 2,66 66,66 66,2" fill="black"/></svg>'),
				linear-gradient(#fff,#fff);
			-webkit-mask-composite: destination-out;
			mask:
				url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 68"><polygon points="2,2 2,66 66,66 66,2" fill="black"/></svg>'),
				linear-gradient(#fff,#fff);
			mask-composite: exclude;
			
			&::after {
				content: "";
				display: block;
				position: absolute;
				inset: -100%;
				background: linear-gradient(to bottom, transparent 30%, #fff 50%, transparent 70%);
				animation: masterwork-rotate 6s linear infinite;
				
				@keyframes masterwork-rotate {
					from { transform: rotate(0deg); }
					to { transform: rotate(360deg); }
				}
			}
			
			.performance-mode & {
				display: none;
			}
		}
	}
	
	@mixin pattern-icon($background) {
		position: absolute;
		inset: 0;
		filter: drop-shadow(0 1px 0 #0006);
		&::before {
			content: "";
			display: block;
			position: absolute;
			bottom: 6%;
			left: 6%;
			width: 20%;
			height: 20%;
			background: $background;
			-webkit-mask-image: url("/image/svg/shaped.svg");
			-webkit-mask-size: contain;
			mask-image: url("/image/svg/shaped.svg");
			mask-size: contain;
		}
	}
	
	&-shaped {
		background-image: url("/image/shaped.png");
		> * {
			@include pattern-icon(#FF8D5C);
		}
	}
	
	&-deepsight {
		$deepsight: #D2513B;
		box-shadow: inset 0 0 0 2px $deepsight;
		
		&-attuned {
			&::before {
				content: "";
				display: block;
				position: absolute;
				bottom: 0;
				right: 0;
				border-bottom: calc(var(--slot-size) * .45) solid $deepsight;
				border-left: calc(var(--slot-size) * .45) solid transparent;
			}
			&::after {
				content: "!";
				display: block;
				position: absolute;
				bottom: 3px;
				right: 0;
				font-size: 1.2em;
				width: 33%;
				height: 33%;
				font-weight: 600;
			}
		}
		
		&-has-pattern {
			position: absolute;
			inset: 0;
			background-image: url("/image/deepsight.png");
		}
		
		&-pattern:not(&-pattern-unlocked) {
			@include pattern-icon(color(foreground));
		}
			
		&-pattern-unlocked {
			@include pattern-icon(color(background-2));
		}
	}
	
	&-source-watermark-custom {
		width: 0;
		height: 0;
		border-left: calc(var(--slot-size) * .49) solid #0000006a;
		border-bottom: calc(var(--slot-size) * .49) solid transparent;
		&::before {
			content: "";
			background: white;
			display: block;
			position: absolute;
			top: calc(var(--slot-size) * .04);
			left: calc(var(--slot-size) * -.44);
			width: calc(var(--slot-size) * .20);
			height: calc(var(--slot-size) * .20);
			-webkit-mask-image: var(--icon);
			-webkit-mask-size: contain;
			-webkit-mask-repeat: no-repeat;
			-webkit-mask-position: center;
			mask-image: var(--icon);
			mask-size: contain;
			mask-repeat: no-repeat;
			mask-position: center;
		}
	}
	
	&-extra {
		:root:not(.show-extra-info) & {
			display: none;
		}
		
		display: grid;
		grid-template-rows: repeat(3, 1fr);
		justify-content: flex-end;
		align-items: center;
    	padding: calc(var(--slot-size) * .02) calc(var(--slot-size) * .05);
    	font-size: calc(var(--slot-size) * .2);
		font-weight: 500;
		text-shadow: 0 0 1px #000, 0 0 1px #000, 0 0 1px #000, 0 0 1px #000, 0 1px 1px black;
		text-align: right;
		
		&::before {
			content: "";
			display: block;
			position: absolute;
			background-image: url("/image/extra.png");
			background-size: cover;
			z-index: -1;
			inset: 1px;
			:where(.item-masterwork, .item-deepsight) ~ & {
				inset: 2px
			}
		}
	}
	
	&-name {
		font-size: .5em;
		max-height: 100%;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
		line-height: 1.3em;
	}
	
	&-energy {
		display: flex;
		align-items: center;
		justify-content: flex-end;
		&::before {
			content: "";
			display: block;
			width: .7em;
			height: .7em;
			background: var(--icon);
			background-repeat: no-repeat;
			background-size: contain;
			filter: drop-shadow(0 1px 0 black) drop-shadow(0 0 1px #000);
			margin-right: .1em;
		}
			
		&-void {
			color: #b185df;
		}
		&-solar {
			color: #f0631e;
		}
		&-arc {
			color: #7aecf3;
		}
		&-stasis {
			color: #4d88ff;
		}
	}
}
